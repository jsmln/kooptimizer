{% extends "base.html" %}
{% load static %}

{% block title %}{% block dashboard_title %}Dashboard{% endblock %} - KoopTimizer{% endblock %}

{% block extra_head %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="manifest" href="{% static 'manifest.json' %}">
    <meta name="apple-mobile-web-app-status-bar-style" content="#3367D6">
    <link rel="stylesheet" href="{% static 'frontend/dashboard.css' %}">
{% endblock %}

{% block content %}
<div class="main-container">

    <nav class="sidebar">
        <div class="sidebar-header">
            <button id="sidebar-close-btn" class="sidebar-close">
                <i class="bi bi-x"></i>
            </button>
        </div>

        <ul>
            {% if request.session.role == 'admin' %}
                <li><a href="{% url 'dashboard:admin_dashboard' %}">Dashboard</a></li>
            {% elif request.session.role == 'staff' %}
                <li><a href="{% url 'dashboard:staff_dashboard' %}">Dashboard</a></li>
            {% elif request.session.role == 'cooperative_officer' %}
                <li><a href="{% url 'dashboard:cooperative_dashboard' %}">Dashboard</a></li>
            {% endif %}

            {% if request.session.role == 'admin' or request.session.role == 'staff' %}
                <li><a href="#">Data Bank Management</a></li>
                <li><a href="{% url 'account_management:account_management' %}">Account Management</a></li>
            {% endif %}

            {% if request.session.role == 'cooperative_officer' %}
                <li><a href="#">Profile Management</a></li>
            {% endif %}

            <li><a href="{% url 'communications:message' %}">Messages</a></li>
            <li><a href="{% url 'communications:announcement_form' %}">Announcements</a></li>
        </ul>
        </nav>

    <div class="sidebar-overlay"></div>

    <main class="dashboard-main-content">
        {% block dashboard_content %}
            <h1>Dashboard Home</h1>
            <p>Welcome to your dashboard. Select a module from the sidebar to get started.</p>
        {% endblock %}
    </main>

</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const toggleBtn = document.getElementById('sidebar-toggle-btn');
        const closeBtn = document.getElementById('sidebar-close-btn');
        const overlay = document.querySelector('.sidebar-overlay');
        const body = document.body;

        function openSidebar() {
            body.classList.add('sidebar-toggled');
        }

        function closeSidebar() {
            body.classList.remove('sidebar-toggled');
        }

        if (toggleBtn) {
            toggleBtn.addEventListener('click', openSidebar);
        }
        if (closeBtn) {
            closeBtn.addEventListener('click', closeSidebar);
        }
        if (overlay) {
            overlay.addEventListener('click', closeSidebar);
        }
    });
</script>
{% endblock %}